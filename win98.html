<!DOCTYPE html>
<!--
Project: Jordan Oamelda Win98
Description: A nostalgic browser-based mini operating system emulating Windows 98 aesthetics and behavior. Includes classic games (Tic-Tac-Toe, Tetris, Minesweeper, Snake, Paint, Clock, Chess), productivity utilities (Notepad, Calculator, To-Do, Calendar, Converter, Dictionary, Weather), and new apps: Terminal, Stopwatch, Dice Roller, Media Player.
Created by: Jordan Oamelda
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jordan Oamelda Win98</title>
  <style>
    /* Win98 theme */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { width: 100%; height: 100%; overflow: hidden; background: #008080; font-family: "MS Sans Serif", "Tahoma", sans-serif; }
    #desktop { position: relative; width: 100%; height: calc(100% - 40px);
      background: url('https://upload.wikimedia.org/wikipedia/commons/6/6c/Windows_98_wallpaper.png') no-repeat center/cover;
      padding: 10px;
    }
    .icon { width: 60px; text-align: center; margin: 10px; cursor: pointer; display: inline-block; color: black; }
    .icon img { width: 32px; height: 32px; }
    .icon div { font-size: 10px; margin-top: 2px; }
    #taskbar { position: absolute; bottom: 0; left: 0; width: 100%; height: 40px;
      background: #C0C0C0; border-top: 2px solid #fff; border-left: 2px solid #fff;
      border-bottom: 2px solid #808080; border-right: 2px solid #808080;
      display: flex; align-items: center; padding: 0 4px;
    }
    #start-button { display: flex; align-items: center; padding: 2px 8px; background: #C0C0C0;
      border-top: 2px solid #fff; border-left: 2px solid #fff;
      border-bottom: 2px solid #808080; border-right: 2px solid #808080;
      font-size: 12px; cursor: pointer; margin-right: 4px;
    }
    #start-menu { position: absolute; bottom: 40px; left: 0; width: 300px;
      background: #C0C0C0; border: 2px solid #808080; display: none;
    }
    #start-menu ul { list-style: none; max-height: 300px; overflow-y: auto; padding: 0; }
    #start-menu li { padding: 4px 8px; font-size: 12px;
      border-top: 1px solid #fff; border-left: 1px solid #fff;
      border-bottom: 1px solid #808080; border-right: 1px solid #808080;
      background: #C0C0C0; cursor: pointer;
      list-style: none;
    }
    #start-menu li:hover { background: #000080; color: white; }
    .window { position: absolute; width: 320px; height: 240px;
      background: #C0C0C0; border: 2px solid #808080;
      display: flex; flex-direction: column; z-index: 10;
    }
    .title-bar { display: flex; justify-content: space-between; align-items: center;
      background: #000080; color: white; font-size: 12px; padding: 2px 4px;
      cursor: move;
    }
    .controls button { width: 16px; height: 16px; background: #C0C0C0;
      border: 2px solid #fff; border-left: 2px solid #808080;
      margin-left: 2px; padding: 0; cursor: pointer;
      font-family: "MS Sans Serif";
    }
    .content { flex: 1; background: white; padding: 4px; overflow: auto;
      border: 2px solid #fff; border-left: 2px solid #C0C0C0;
    }
    .grid3 { display: grid; grid-template: repeat(3,1fr)/repeat(3,1fr); gap: 2px; }
    .grid8 { display: grid; grid-template: repeat(8,1fr)/repeat(8,1fr); gap: 2px; }
    .calendar-grid { display: grid; grid-template: repeat(7,auto)/repeat(7,1fr); gap: 2px; text-align: center; }
    audio { width: 100%; margin-top: 8px; }
  </style>
</head>
<body>
  <div id="desktop">
    <!-- Utilities & Games -->
    <div class="icon" data-app="notepad"><img src="https://img.icons8.com/fluency/48/000000/notepad.png"><div>Notepad</div></div>
    <div class="icon" data-app="calculator"><img src="https://img.icons8.com/fluency/48/000000/calculator.png"><div>Calculator</div></div>
    <div class="icon" data-app="tictactoe"><img src="https://img.icons8.com/fluency/48/000000/tic-tac-toe.png"><div>TicTacToe</div></div>
    <div class="icon" data-app="minesweeper"><img src="https://img.icons8.com/fluency/48/000000/minesweeper.png"><div>Minesweeper</div></div>
    <div class="icon" data-app="snake"><img src="https://img.icons8.com/fluency/48/000000/snake.png"><div>Snake</div></div>
    <div class="icon" data-app="tetris"><img src="https://img.icons8.com/fluency/48/000000/tetris.png"><div>Tetris</div></div>
    <div class="icon" data-app="paint"><img src="https://img.icons8.com/fluency/48/000000/paint-brush.png"><div>Paint</div></div>
    <div class="icon" data-app="clock"><img src="https://img.icons8.com/fluency/48/000000/clock.png"><div>Clock</div></div>
    <div class="icon" data-app="todo"><img src="https://img.icons8.com/fluency/48/000000/todo-list.png"><div>To-Do</div></div>
    <div class="icon" data-app="calendar"><img src="https://img.icons8.com/fluency/48/000000/calendar.png"><div>Calendar</div></div>
    <div class="icon" data-app="converter"><img src="https://img.icons8.com/fluency/48/000000/conversion.png"><div>Converter</div></div>
    <div class="icon" data-app="dictionary"><img src="https://img.icons8.com/fluency/48/000000/dictionary.png"><div>Dictionary</div></div>
    <div class="icon" data-app="weather"><img src="https://img.icons8.com/fluency/48/000000/partly-cloudy-day.png"><div>Weather</div></div>
    <div class="icon" data-app="about"><img src="https://img.icons8.com/fluency/48/000000/info.png"><div>About</div></div>
    <!-- New Apps -->
    <div class="icon" data-app="terminal"><img src="https://img.icons8.com/fluency/48/000000/console.png"><div>Terminal</div></div>
    <div class="icon" data-app="stopwatch"><img src="https://img.icons8.com/fluency/48/000000/stopwatch.png"><div>Stopwatch</div></div>
    <div class="icon" data-app="dice"><img src="https://img.icons8.com/fluency/48/000000/dice.png"><div>Dice Roller</div></div>
    <div class="icon" data-app="mediaplayer"><img src="https://img.icons8.com/fluency/48/000000/musical-notes.png"><div>Media Player</div></div>
  </div>
  <div id="taskbar">
    <button id="start-button"><img src="https://img.icons8.com/fluency/48/000000/windows-98.png">Start</button>
  </div>
  <div id="start-menu">
    <ul>
      <li data-app="notepad">Notepad</li>
      <li data-app="calculator">Calculator</li>
      <li data-app="tictactoe">TicTacToe</li>
      <li data-app="minesweeper">Minesweeper</li>
      <li data-app="snake">Snake</li>
      <li data-app="tetris">Tetris</li>
      <li data-app="paint">Paint</li>
      <li data-app="clock">Clock</li>
      <li data-app="todo">To-Do</li>
      <li data-app="calendar">Calendar</li>
      <li data-app="converter">Converter</li>
      <li data-app="dictionary">Dictionary</li>
      <li data-app="weather">Weather</li>
      <li data-app="about">About</li>
      <li data-app="terminal">Terminal</li>
      <li data-app="stopwatch">Stopwatch</li>
      <li data-app="dice">Dice Roller</li>
      <li data-app="mediaplayer">Media Player</li>
    </ul>
  </div>
  <script>
    // Common helpers
    function enableDrag(win, bar) {
      let dx, dy, dragging = false;
      bar.addEventListener('mousedown', e => {
        dragging = true;
        dx = e.clientX - win.offsetLeft;
        dy = e.clientY - win.offsetTop;
        win.style.zIndex = ++zIndex;
      });
      document.addEventListener('mousemove', e => {
        if (dragging) {
          win.style.left = (e.clientX - dx) + 'px';
          win.style.top = (e.clientY - dy) + 'px';
        }
      });
      document.addEventListener('mouseup', () => dragging = false);
    }

    // App initializers
    function initPaint(c) {
      const cnv = document.createElement('canvas'); cnv.width=300; cnv.height=200; c.appendChild(cnv);
      const ctx = cnv.getContext('2d'); let draw=false;
      cnv.onmousedown=()=>draw=true; cnv.onmouseup=()=>draw=false;
      cnv.onmousemove=e=>draw&&ctx.fillRect(e.offsetX,e.offsetY,2,2);
    }
    function initClock(c){ const d=document.createElement('div'); d.style.fontSize='1.5rem'; c.appendChild(d); setInterval(()=>d.textContent=new Date().toLocaleTimeString(),500); }
    function initTodo(c){ const inp=document.createElement('input'),b=document.createElement('button'),ul=document.createElement('ul'); inp.placeholder='Task';b.textContent='Add';b.onclick=()=>{ if(inp.value){const li=document.createElement('li');li.textContent=inp.value;ul.appendChild(li);inp.value='';}}; c.append(inp,b,ul);}    
    function initCalendar(c){ const now=new Date(),m=now.getMonth(),y=now.getFullYear(),start=new Date(y,m,1).getDay(),days=new Date(y,m+1,0).getDate();
      const grid=document.createElement('div');grid.className='calendar-grid';['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(w=>grid.appendChild(Object.assign(document.createElement('div'),{textContent:w})));
      for(let i=0;i<start;i++)grid.appendChild(document.createElement('div'));
      for(let d=1;d<=days;d++)grid.appendChild(Object.assign(document.createElement('div'),{textContent:d}));c.append(grid);
    }
    function initConverter(c){ const sel=document.createElement('select'),i=document.createElement('input'),o=document.createElement('div'); const ops={'kg>lb':v=>v*2.20462,'lb>kg':v=>v/2.20462,'m>ft':v=>v*3.28084,'ft>m':v=>v/3.28084}; for(let k in ops) sel.appendChild(Object.assign(document.createElement('option'),{value:k,textContent:k})); i.type='number';
      [sel,i].forEach(el=>el.onchange=()=>{ const v=parseFloat(i.value); if(!isNaN(v)) o.textContent=ops[sel.value](v).toFixed(2); }); c.append(sel,i,o);
    }
    function initDictionary(c){ const i=document.createElement('input'),b=document.createElement('button'),o=document.createElement('div'); i.placeholder='Word';b.textContent='Define';b.onclick=()=>{fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${i.value}`).then(r=>r.json()).then(j=>o.innerHTML=j[0].meanings.map(m=>`<strong>${m.partOfSpeech}</strong>: ${m.definitions[0].definition}`).join('<br>')).catch(()=>o.textContent='Not found');};c.append(i,b,o);}    
    function initWeather(c){ const i=document.createElement('input'),b=document.createElement('button'),o=document.createElement('div');i.placeholder='City';b.textContent='Get';b.onclick=()=>{fetch(`https://wttr.in/${i.value}?format=j1`).then(r=>r.json()).then(j=>o.textContent=`${j.current_condition[0].temp_C}°C ${j.current_condition[0].weatherDesc[0].value}`);};c.append(i,b,o);}    
    function initAbout(c){ c.innerHTML=`<h2>About Jordan Oamelda's OS</h2><p>Created by Jordan Oamelda, this browser-based mini-OS blooms with digital nostalgia...</p>`; }

    // Built-in games
    function initTicTacToe(c) {
      const grid = document.createElement('div');
      grid.className = 'grid3';
      let turn = 'X';
      const cells = [];
      const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
      function checkWin() {
        return wins.some(row => row.every(i => cells[i].textContent === turn));
      }
      for (let i = 0; i < 9; i++) {
        const b = document.createElement('button');
        b.onclick = () => {
          if (!b.textContent) {
            b.textContent = turn;
            if (checkWin()) {
              setTimeout(() => alert(turn + ' wins!'), 0);
            } else if (cells.every(c => c.textContent)) {
              setTimeout(() => alert('Draw!'), 0);
            }
            turn = turn === 'X' ? 'O' : 'X';
          }
        };
        grid.appendChild(b);
        cells.push(b);
      }
      c.appendChild(grid);
    }
    function initMinesweeper(c) {
      const rows = 8, cols = 8, mines = 10;
      const gridData = Array.from({ length: rows }, () => Array.from({ length: cols }, () => ({ mine: false, adj: 0 })));
      let placed = 0;
      while (placed < mines) {
        const y = Math.floor(Math.random() * rows);
        const x = Math.floor(Math.random() * cols);
        if (!gridData[y][x].mine) { gridData[y][x].mine = true; placed++; }
      }
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          if (!gridData[y][x].mine) {
            gridData[y][x].adj = [-1,0,1].flatMap(dy => [-1,0,1].map(dx => [dy,dx]))
              .filter(([dy,dx]) => (dy || dx) && gridData[y+dy]?.[x+dx]?.mine)
              .length;
          }
        }
      }
      const board = document.createElement('div');
      board.className = 'grid8';
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          const btn = document.createElement('button');
          btn.onclick = () => {
            if (gridData[y][x].mine) {
              setTimeout(() => alert('Boom!'), 0);
            } else {
              btn.textContent = gridData[y][x].adj || '';
              btn.disabled = true;
            }
          };
          board.appendChild(btn);
        }
      }
      c.appendChild(board);
    }
    function initSnake(c) {
      const size = 16, cols = 20, rows = 15;
      const cnv = document.createElement('canvas'); cnv.width = cols * size; cnv.height = rows * size; c.appendChild(cnv);
      const ctx = cnv.getContext('2d');
      let snake = [{ x: 10, y: 7 }], dir = { x: 1, y: 0 }, food = { x: 5, y: 5 };
      document.addEventListener('keydown', e => {
        if (e.key.includes('Arrow')) {
          switch (e.key) {
            case 'ArrowUp': dir = { x: 0, y: -1 }; break;
            case 'ArrowDown': dir = { x: 0, y: 1 }; break;
            case 'ArrowLeft': dir = { x: -1, y: 0 }; break;
            case 'ArrowRight': dir = { x: 1, y: 0 }; break;
          }
        }
      });
      function loop() {
        const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };
        if (head.x < 0 || head.x >= cols || head.y < 0 || head.y >= rows ||
            snake.some(s => s.x === head.x && s.y === head.y)) {
          return setTimeout(() => alert('Game Over'), 0);
        }
        snake.unshift(head);
        if (head.x === food.x && head.y === food.y) {
          food = { x: Math.floor(Math.random() * cols), y: Math.floor(Math.random() * rows) };
        } else {
          snake.pop();
        }
        ctx.fillStyle = '#000'; ctx.fillRect(0, 0, cnv.width, cnv.height);
        ctx.fillStyle = '#0f0'; snake.forEach(s => ctx.fillRect(s.x * size, s.y * size, size, size));
        ctx.fillStyle = '#f00'; ctx.fillRect(food.x * size, food.y * size, size, size);
      }
      setInterval(loop, 150);
    }
    function initTetris(c) {
      const cnv = document.createElement('canvas'); cnv.width = 240; cnv.height = 400; c.appendChild(cnv);
      const ctx = cnv.getContext('2d'); ctx.scale(20,20);
      const arena = Array.from({ length: 20 }, () => Array(12).fill(0));
      const colors = [null,'#FF0D72','#0DC2FF','#0DFF72','#F538FF','#FF8E0D','#FFE138','#3877FF'];
      function drawMatrix(m, o) {
        m.forEach((row,y) => row.forEach((v,x) => {
          if (v) { ctx.fillStyle = colors[v]; ctx.fillRect(x+o.x, y+o.y, 1, 1); }
        }));
      }
      function draw() {
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,cnv.width,cnv.height);
        drawMatrix(arena, { x:0, y:0 }); drawMatrix(player.matrix, player.pos);
      }
      function collide() {
        const [m,o] = [player.matrix, player.pos];
        for (let y=0; y<m.length; y++) for (let x=0; x<m[y].length; x++) {
          if (m[y][x] && (arena[y+o.y]?.[x+o.x] || 0) !== 0) return true;
        }
        return false;
      }
      function merge() { player.matrix.forEach((row,y) => row.forEach((v,x) => { if (v) arena[y+player.pos.y][x+player.pos.x] = v; })); }
      function createPiece(type) {
        switch(type) {
          case 'T': return [[0,0,0],[1,1,1],[0,1,0]];
          case 'O': return [[2,2],[2,2]];
          case 'L': return [[0,3,0],[0,3,0],[0,3,3]];
          case 'J': return [[0,4,0],[0,4,0],[4,4,0]];
          case 'I': return [[0,5,0,0],[0,5,0,0],[0,5,0,0],[0,5,0,0]];
          case 'S': return [[0,6,6],[6,6,0],[0,0,0]];
          case 'Z': return [[7,7,0],[0,7,7],[0,0,0]];
        }
      }
      function playerReset() {
        const pieces = 'TJLOSZI';
        player.matrix = createPiece(pieces[Math.floor(Math.random()*pieces.length)]);
        player.pos.y = 0; player.pos.x = ((arena[0].length/2|0) - (player.matrix[0].length/2|0));
        if (collide()) arena.forEach(row => row.fill(0));
      }
      function update(time=0) {
        const delta = time - lastTime; lastTime = time; dropCounter += delta;
        if (dropCounter > dropInterval) { player.pos.y++; if (collide()) { player.pos.y--; merge(); playerReset(); } dropCounter = 0; }
        draw(); requestAnimationFrame(update);
      }
      document.addEventListener('keydown', e => {
        if (e.keyCode === 37) player.pos.x--; else if (e.keyCode === 39) player.pos.x++;
        else if (e.keyCode === 40) player.pos.y++; else if (e.keyCode === 81) rotate(-1);
        else if (e.keyCode === 87) rotate(1);
      });
      function rotate(dir) {
        const m = player.matrix; for (let y=0; y<m.length; y++) for (let x=0; x<y; x++) [m[x][y],m[y][x]] = [m[y][x],m[x][y]];
        if (dir > 0) m.forEach(row => row.reverse()); else m.reverse(); if (collide()) rotate(-dir);
      }
      let dropCounter = 0, dropInterval = 1000, lastTime = 0;
      const player = { pos:{x:0,y:0}, matrix:null };
      playerReset(); update();
    }

    // Main launch logic
    let zIndex=1;
    document.getElementById('start-button').onclick=e=>{e.stopPropagation();document.getElementById('start-menu').style.display= document.getElementById('start-menu').style.display==='block'?'none':'block';};
    document.addEventListener('click',()=>document.getElementById('start-menu').style.display='none');
    document.querySelectorAll('.icon').forEach(icon=>icon.ondblclick=()=>launch(icon.dataset.app));
    document.querySelectorAll('#start-menu li').forEach(li=>li.onclick=()=>{launch(li.dataset.app);document.getElementById('start-menu').style.display='none';});

    function launch(app){
      const win=document.createElement('div');win.className='window';win.style.top='60px';win.style.left='60px';win.style.zIndex=++zIndex;
      const bar=document.createElement('div');bar.className='title-bar';bar.innerHTML=`<span>${app}</span>`;
      const ctrl=document.createElement('div');ctrl.className='controls';const btn=document.createElement('button');btn.textContent='✕';btn.onclick=()=>win.remove();ctrl.appendChild(btn);
      bar.appendChild(ctrl);win.appendChild(bar);
      const content=document.createElement('div');content.className='content';
      switch(app){
        case 'notepad':{const ta=document.createElement('textarea');ta.style.width='100%';ta.style.height='100%';content.appendChild(ta);break;}
        case 'calculator':{const div=document.createElement('div'),inp=document.createElement('input');inp.readOnly=true;inp.style.width='100%';div.appendChild(inp); '789/456*123-0.+='.split('').forEach(c=>{const b=document.createElement('button');b.textContent=c;b.onclick=()=>c==='='?inp.value=eval(inp.value):inp.value+=c;div.appendChild(b);});content.appendChild(div);break;}
        case 'tictactoe':initTicTacToe(content);break;
        case 'minesweeper':initMinesweeper(content);break;
        case 'snake':initSnake(content);break;
        case 'tetris':initTetris(content);break;
        case 'paint':initPaint(content);break;
        case 'clock':initClock(content);break;
        case 'todo':initTodo(content);break;
        case 'calendar':initCalendar(content);break;
        case 'converter':initConverter(content);break;
        case 'dictionary':initDictionary(content);break;
        case 'weather':initWeather(content);break;
        case 'about':initAbout(content);break;
        case 'terminal':{const term=document.createElement('div');term.contentEditable=true;term.style.cssText='background:#000;color:#0f0;font-family:monospace;height:100%;padding:4px;';term.textContent='C:\\> '; term.onkeydown=e=>{if(e.key==='Enter'){e.preventDefault();const cmd=term.textContent.split('\n').pop().slice(4).trim();let out; if(cmd==='help')out='help,date,clear';else if(cmd==='date')out=new Date();else if(cmd==='clear'){term.textContent='C:\\> ';return;}else out=`${cmd}: not found`;term.textContent+=`\n${out}\nC:\\> `;}};content.appendChild(term);break;}
        case 'stopwatch':{let start=0,elapsed=0,id; const disp=document.createElement('div');disp.style.fontSize='1.5rem';const s=document.createElement('button'),p=document.createElement('button'),r=document.createElement('button');s.textContent='Start';p.textContent='Stop';r.textContent='Reset'; const upd=()=>{const d=new Date(elapsed+(id?Date.now()-start:0));disp.textContent=[d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds()].map(n=>n.toString().padStart(2,'0')).join(':');};s.onclick=()=>!id&&(start=Date.now(),id=setInterval(upd,100));p.onclick=()=>id&&(clearInterval(id),elapsed+=Date.now()-start,id=0);r.onclick=()=>clearInterval(id)|| (elapsed=0,id=0,upd());content.append(disp,s,p,r);break;}
        case 'dice':{const b=document.createElement('button'),o=document.createElement('div');b.textContent='Roll';b.onclick=()=>o.textContent=Math.floor(Math.random()*6)+1;content.append(b,o);break;}
        case 'mediaplayer':{const inp=document.createElement('input'),aud=document.createElement('audio');inp.type='file';inp.accept='audio/*';aud.controls=true;inp.onchange=()=>{aud.src=URL.createObjectURL(inp.files[0]);aud.play();};content.append(inp,aud);break;}
      }
      win.appendChild(content);document.body.appendChild(win);enableDrag(win,bar);
    }
  </script>
</body>
</html>
